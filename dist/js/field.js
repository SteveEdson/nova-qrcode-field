/*! For license information please see field.js.LICENSE.txt */
(()=>{var t={742:(t,e)=>{"use strict";e.byteLength=function(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,i=l(t),s=i[0],a=i[1],h=new o(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),u=0,c=a>0?s-4:s;for(r=0;r<c;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],h[u++]=e>>16&255,h[u++]=e>>8&255,h[u++]=255&e;2===a&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,h[u++]=255&e);1===a&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,h[u++]=e>>8&255,h[u++]=255&e);return h},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],s=16383,a=0,l=n-o;a<l;a+=s)i.push(h(t,a,a+s>l?l:a+s));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=i.length;s<a;++s)r[s]=i[s],n[i.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function h(t,e,n){for(var o,i,s=[],a=e;a<n;a+=3)o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},764:(t,e,r)=>{"use strict";var n=r(742),o=r(645),i=r(826);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return h(this,t,e,r)}function h(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=f(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),o=(t=a(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(l.isBuffer(e)){var r=0|g(e.length);return 0===(t=a(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):f(t,e);if("Buffer"===e.type&&i(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(u(e),t=a(t,e<0?0:0|g(e)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|g(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function g(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(t).length;default:if(n)return F(t).length;e=(""+e).toLowerCase(),n=!0}}function p(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return _(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return x(this,e,r);case"latin1":case"binary":return S(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:w(t,e,r,n,o);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):w(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function w(t,e,r,n,o){var i,s=1,a=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,r/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var u=-1;for(i=r;i<a;i++)if(h(t,i)===h(e,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===l)return u*s}else-1!==u&&(i-=i-u),u=-1}else for(r+l>a&&(r=a-l),i=r;i>=0;i--){for(var c=!0,f=0;f<l;f++)if(h(t,i+f)!==h(e,f)){c=!1;break}if(c)return i}return-1}function v(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function b(t,e,r,n){return $(F(e,t.length-r),t,r,n)}function A(t,e,r,n){return $(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function C(t,e,r,n){return A(t,e,r,n)}function E(t,e,r,n){return $(Y(e),t,r,n)}function T(t,e,r,n){return $(function(t,e){for(var r,n,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,s,a,l,h=t[o],u=null,c=h>239?4:h>223?3:h>191?2:1;if(o+c<=r)switch(c){case 1:h<128&&(u=h);break;case 2:128==(192&(i=t[o+1]))&&(l=(31&h)<<6|63&i)>127&&(u=l);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&(l=(15&h)<<12|(63&i)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(l=(15&h)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,c=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),o+=c}return function(t){var e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=R));return r}(n)}e.lW=l,e.h2=50,l.TYPED_ARRAY_SUPPORT=void 0!==r.g.TYPED_ARRAY_SUPPORT?r.g.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,r){return h(null,t,e,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,r){return function(t,e,r,n){return u(e),e<=0?a(t,e):void 0!==r?"string"==typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},l.allocUnsafe=function(t){return c(null,t)},l.allocUnsafeSlow=function(t){return c(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=l.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var s=t[r];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},l.byteLength=d,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?B(this,0,t):p.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",r=e.h2;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,r,n,o){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(i,s),h=this.slice(n,o),u=t.slice(e,r),c=0;c<a;++c)if(h[c]!==u[c]){i=h[c],s=u[c];break}return i<s?-1:s<i?1:0},l.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},l.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},l.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},l.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return A(this,t,e,r);case"latin1":case"binary":return C(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function x(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function S(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function _(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=z(t[i]);return o}function D(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function k(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,o,i){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function I(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function M(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function O(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,i){return i||O(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function N(t,e,r,n,i){return i||O(t,0,r,8),o.write(t,e,r,n,52,8),r+8}l.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=l.prototype;else{var o=e-t;r=new l(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},l.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||k(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},l.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||k(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},l.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||k(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||k(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||L(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},l.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||L(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},l.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);L(this,t,e,r,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},l.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);L(this,t,e,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},l.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},l.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},l.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},l.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},l.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},l.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var s=l.isBuffer(t)?t:F(new l(t,n).toString()),a=s.length;for(i=0;i<r-e;++i)this[i+e]=s[i%a]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function Y(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}},178:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(879),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".qr-item img{border:thin solid #ddd;padding:5px}",""]);const i=o},906:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(879),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".qr-item{margin-top:5px}.qr-item img{border:thin solid #ddd;padding:2px}",""]);const i=o},879:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);n&&o[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),e.push(l))}},e}},645:(t,e)=>{e.read=function(t,e,r,n,o){var i,s,a=8*o-n-1,l=(1<<a)-1,h=l>>1,u=-7,c=r?o-1:0,f=r?-1:1,g=t[e+c];for(c+=f,i=g&(1<<-u)-1,g>>=-u,u+=a;u>0;i=256*i+t[e+c],c+=f,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=n;u>0;s=256*s+t[e+c],c+=f,u-=8);if(0===i)i=1-h;else{if(i===l)return s?NaN:1/0*(g?-1:1);s+=Math.pow(2,n),i-=h}return(g?-1:1)*s*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var s,a,l,h=8*i-o-1,u=(1<<h)-1,c=u>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:i-1,d=n?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+c>=1?f/l:f*Math.pow(2,1-c))*l>=2&&(s++,l/=2),s+c>=u?(a=0,s=u):s+c>=1?(a=(e*l-1)*Math.pow(2,o),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,o),s=0));o>=8;t[r+g]=255&a,g+=d,a/=256,o-=8);for(s=s<<o|a,h+=o;h>0;t[r+g]=255&s,g+=d,s/=256,h-=8);t[r+g-d]|=128*p}},826:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},155:t=>{var e,r,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(t){r=i}}();var a,l=[],h=!1,u=-1;function c(){h&&a&&(h=!1,a.length?l=a.concat(l):u=-1,l.length&&f())}function f(){if(!h){var t=s(c);h=!0;for(var e=l.length;e;){for(a=l,l=[];++u<e;)a&&a[u].run();u=-1,e=l.length}a=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function d(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new g(t,e)),1!==l.length||h||s(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.prependListener=d,n.prependOnceListener=d,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},379:(t,e,r)=>{"use strict";var n,o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),s=[];function a(t){for(var e=-1,r=0;r<s.length;r++)if(s[r].identifier===t){e=r;break}return e}function l(t,e){for(var r={},n=[],o=0;o<t.length;o++){var i=t[o],l=e.base?i[0]+e.base:i[0],h=r[l]||0,u="".concat(l," ").concat(h);r[l]=h+1;var c=a(u),f={css:i[1],media:i[2],sourceMap:i[3]};-1!==c?(s[c].references++,s[c].updater(f)):s.push({identifier:u,updater:m(f,e),references:1}),n.push(u)}return n}function h(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var o=r.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var s=i(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var u,c=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function f(t,e,r,n){var o=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=c(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function g(t,e,r){var n=r.css,o=r.media,i=r.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var d=null,p=0;function m(t,e){var r,n,o;if(e.singleton){var i=p++;r=d||(d=h(e)),n=f.bind(null,r,i,!1),o=f.bind(null,r,i,!0)}else r=h(e),n=g.bind(null,r,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var r=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<r.length;n++){var o=a(r[n]);s[o].references--}for(var i=l(t,e),h=0;h<r.length;h++){var u=a(r[h]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}r=i}}}},744:(t,e)=>{"use strict";e.Z=(t,e)=>{const r=t.__vccOpts||t;for(const[t,n]of e)r[t]=n;return r}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nc=void 0,(()=>{"use strict";const t=Vue;const e=["src"];function n(t){return""===t?t:"true"===t||"1"==t}const o=function(t,e){return new Promise(((e,r)=>{var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsArrayBuffer(n.response)},n.open("GET",t),n.send()}))};var i=r(155);function s(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function a(t,e){for(var r,n="",o=0,i=-1,s=0,a=0;a<=t.length;++a){if(a<t.length)r=t.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(i===a-1||1===s);else if(i!==a-1&&2===s){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",o=0):o=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),i=a,s=0;continue}}else if(2===n.length||1===n.length){n="",o=0,i=a,s=0;continue}e&&(n.length>0?n+="/..":n="..",o=2)}else n.length>0?n+="/"+t.slice(i+1,a):n=t.slice(i+1,a),o=a-i-1;i=a,s=0}else 46===r&&-1!==s?++s:s=-1}return n}var l={resolve:function(){for(var t,e="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var o;n>=0?o=arguments[n]:(void 0===t&&(t=i.cwd()),o=t),s(o),0!==o.length&&(e=o+"/"+e,r=47===o.charCodeAt(0))}return e=a(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(t){if(s(t),0===t.length)return".";var e=47===t.charCodeAt(0),r=47===t.charCodeAt(t.length-1);return 0!==(t=a(t,!e)).length||e||(t="."),t.length>0&&r&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return s(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,e=0;e<arguments.length;++e){var r=arguments[e];s(r),r.length>0&&(void 0===t?t=r:t+="/"+r)}return void 0===t?".":l.normalize(t)},relative:function(t,e){if(s(t),s(e),t===e)return"";if((t=l.resolve(t))===(e=l.resolve(e)))return"";for(var r=1;r<t.length&&47===t.charCodeAt(r);++r);for(var n=t.length,o=n-r,i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var a=e.length-i,h=o<a?o:a,u=-1,c=0;c<=h;++c){if(c===h){if(a>h){if(47===e.charCodeAt(i+c))return e.slice(i+c+1);if(0===c)return e.slice(i+c)}else o>h&&(47===t.charCodeAt(r+c)?u=c:0===c&&(u=0));break}var f=t.charCodeAt(r+c);if(f!==e.charCodeAt(i+c))break;47===f&&(u=c)}var g="";for(c=r+u+1;c<=n;++c)c!==n&&47!==t.charCodeAt(c)||(0===g.length?g+="..":g+="/..");return g.length>0?g+e.slice(i+u):(i+=u,47===e.charCodeAt(i)&&++i,e.slice(i))},_makeLong:function(t){return t},dirname:function(t){if(s(t),0===t.length)return".";for(var e=t.charCodeAt(0),r=47===e,n=-1,o=!0,i=t.length-1;i>=1;--i)if(47===(e=t.charCodeAt(i))){if(!o){n=i;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"//":t.slice(0,n)},basename:function(t,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');s(t);var r,n=0,o=-1,i=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var a=e.length-1,l=-1;for(r=t.length-1;r>=0;--r){var h=t.charCodeAt(r);if(47===h){if(!i){n=r+1;break}}else-1===l&&(i=!1,l=r+1),a>=0&&(h===e.charCodeAt(a)?-1==--a&&(o=r):(a=-1,o=l))}return n===o?o=l:-1===o&&(o=t.length),t.slice(n,o)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!i){n=r+1;break}}else-1===o&&(i=!1,o=r+1);return-1===o?"":t.slice(n,o)},extname:function(t){s(t);for(var e=-1,r=0,n=-1,o=!0,i=0,a=t.length-1;a>=0;--a){var l=t.charCodeAt(a);if(47!==l)-1===n&&(o=!1,n=a+1),46===l?-1===e?e=a:1!==i&&(i=1):-1!==e&&(i=-1);else if(!o){r=a+1;break}}return-1===e||-1===n||0===i||1===i&&e===n-1&&e===r+1?"":t.slice(e,n)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}("/",t)},parse:function(t){s(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;var r,n=t.charCodeAt(0),o=47===n;o?(e.root="/",r=1):r=0;for(var i=-1,a=0,l=-1,h=!0,u=t.length-1,c=0;u>=r;--u)if(47!==(n=t.charCodeAt(u)))-1===l&&(h=!1,l=u+1),46===n?-1===i?i=u:1!==c&&(c=1):-1!==i&&(c=-1);else if(!h){a=u+1;break}return-1===i||-1===l||0===c||1===c&&i===l-1&&i===a+1?-1!==l&&(e.base=e.name=0===a&&o?t.slice(1,l):t.slice(a,l)):(0===a&&o?(e.name=t.slice(1,i),e.base=t.slice(1,l)):(e.name=t.slice(a,i),e.base=t.slice(a,l)),e.ext=t.slice(i,l)),a>0?e.dir=t.slice(0,a-1):o&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l;const h=l.extname,u=l.basename;class c{constructor(){let t=void 0===r.g,e="image/png",n="image/jpeg",o="image/jpeg",i="image/webp",s="application/pdf",a="image/svg+xml";Object.assign(this,{toMime:this.toMime.bind(this),fromMime:this.fromMime.bind(this),expected:t?'"png", "jpg", or "webp"':'"png", "jpg", "pdf", or "svg"',formats:t?{png:e,jpg:n,jpeg:o,webp:i}:{png:e,jpg:n,jpeg:o,pdf:s,svg:a},mimes:t?{[e]:"png",[n]:"jpg",[i]:"webp"}:{[e]:"png",[n]:"jpg",[s]:"pdf",[a]:"svg"}})}toMime(t){return this.formats[(t||"").replace(/^\./,"").toLowerCase()]}fromMime(t){return this.mimes[t]}}class f{static for(t){return(new f).append(t).get()}constructor(){this.crc=-1}get(){return~this.crc}append(t){for(var e=0|this.crc,r=this.table,n=0,o=0|t.length;n<o;n++)e=e>>>8^r[255&(e^t[n])];return this.crc=e,this}}function g(t){let e=new Uint8Array(t),r=new DataView(e.buffer),n={array:e,view:r,size:t,set8:(t,e)=>(r.setUint8(t,e),n),set16:(t,e)=>(r.setUint16(t,e,!0),n),set32:(t,e)=>(r.setUint32(t,e,!0),n),bytes:(t,r)=>(e.set(r,t),n)};return n}f.prototype.table=(()=>{var t,e,r,n=[];for(t=0;t<256;t++){for(r=t,e=0;e<8;e++)r=1&r?r>>>1^3988292384:r>>>1;n[t]=r}return n})();class d{constructor(t){let e=new Date;Object.assign(this,{directory:t,offset:0,files:[],time:(e.getHours()<<6|e.getMinutes())<<5|e.getSeconds()/2,date:(e.getFullYear()-1980<<4|e.getMonth()+1)<<5|e.getDate()}),this.add(t)}async add(t,e){let r=!e,n=d.encoder.encode(`${this.directory}/${r?"":t}`),o=new Uint8Array(r?0:await e.arrayBuffer()),i=30+n.length,s=i+o.length,{offset:a}=this,l=g(26).set32(0,134742036).set16(6,this.time).set16(8,this.date).set32(10,f.for(o)).set32(14,o.length).set32(18,o.length).set16(22,n.length);a+=i;let h=g(i+o.length+16).set32(0,67324752).bytes(4,l.array).bytes(30,n).bytes(i,o);a+=o.length,h.set32(s,134695760).bytes(s+4,l.array.slice(10,22)),a+=16,this.files.push({offset:a,folder:r,name:n,header:l,payload:h}),this.offset=a}toBuffer(){let t=this.files.reduce(((t,{name:e})=>46+e.length+t),0),e=g(t+22),r=0;for(var{offset:n,name:o,header:i,folder:s}of this.files)e.set32(r,33639248).set16(r+4,20).bytes(r+6,i.array).set8(r+38,s?16:0).set32(r+42,n).bytes(r+46,o),r+=46+o.length;e.set32(r,101010256).set16(r+8,this.files.length).set16(r+10,this.files.length).set32(r+12,t).set32(r+16,this.offset);let a=new Uint8Array(this.offset+e.size),l=0;for(var{payload:h}of this.files)a.set(h.array,l),l+=h.size;return a.set(e.array,l),a}get blob(){return new Blob([this.toBuffer()],{type:"application/zip"})}}d.encoder=new TextEncoder;const p=(t,e,r,n)=>{if(n){let{width:e,height:r}=t,o=Object.assign(document.createElement("canvas"),{width:e,height:r}),i=o.getContext("2d");i.fillStyle=n,i.fillRect(0,0,e,r),i.drawImage(t,0,0),t=o}return new Promise(((n,o)=>t.toBlob(n,e,r)))},m=(t,e)=>{const r=window.URL.createObjectURL(e),n=document.createElement("a");n.style.display="none",n.href=r,n.setAttribute("download",t),void 0===n.download&&n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout((()=>window.URL.revokeObjectURL(r)),100)},y={asBuffer:(...t)=>p(...t).then((t=>t.arrayBuffer())),asDownload:async(t,e,r,n,o)=>{m(o,await p(t,e,r,n))},asZipDownload:async(t,e,r,n,o,i,s)=>{let a=u(o,".zip")||"archive",l=new d(a);await Promise.all(t.map((async(t,o)=>{let a=(t=>i.replace("{}",String(t+1).padStart(s,"0")))(o);await l.add(a,await p(t,e,r,n))}))),m(`${a}.zip`,l.blob)},atScale:(t,e,r)=>t.map((t=>{if(1==e&&!r)return t.canvas;let n=document.createElement("canvas"),o=n.getContext("2d"),i=t.canvas?t.canvas:t;return n.width=i.width*e,n.height=i.height*e,r&&(o.fillStyle=r,o.fillRect(0,0,n.width,n.height)),o.scale(e,e),o.drawImage(i,0,0),n})),options:function(t,{filename:e="",extension:r="",format:n,page:o,quality:i,matte:s,density:a,outline:l,archive:f}={}){var{fromMime:g,toMime:d,expected:p}=new c,m=(f=f||"canvas",n||r.replace(/@\d+x$/i,"")||h(e)),y=(n=g(d(m)||m),d(n)),w=t.length;if(!m)throw new Error("Cannot determine image format (use a filename extension or 'format' argument)");if(!n)throw new Error(`Unsupported file format "${m}" (expected ${p})`);if(!w)throw new RangeError("Canvas has no associated contexts (try calling getContext or newPage first)");let v,b,A=e.replace(/{(\d*)}/g,((t,e)=>(b=!0,e=parseInt(e,10),v=isFinite(e)?e:isFinite(v)?v:-1,"{}"))),C=o>0?o-1:o<0?w+o:void 0;if(isFinite(C)&&C<0||C>=w)throw new RangeError(1==w?`Canvas only has a ‘page 1’ (${C} is out of bounds)`:`Canvas has pages 1–${w} (${C} is out of bounds)`);if(t=isFinite(C)?[t[C]]:b||"pdf"==n?t:t.slice(-1),void 0===i)i=.92;else if("number"!=typeof i||!isFinite(i)||i<0||i>1)throw new TypeError("The quality option must be an number in the 0.0–1.0 range");if(void 0===a){let t=(r||u(e,m)).match(/@(\d+)x$/i);a=t?parseInt(t[1],10):1}else if("number"!=typeof a||!Number.isInteger(a)||a<1)throw new TypeError("The density option must be a non-negative integer");return void 0===l?l=!0:"svg"==n&&(l=!!l),{filename:e,pattern:A,format:n,mime:y,pages:t,padding:v,quality:i,matte:s,density:a,outline:l,archive:f}}},w=y,{asBuffer:v,asDownload:b,asZipDownload:A,atScale:C,options:E}=w,T=Symbol.for("toDataURL");const{CanvasRenderingContext2D:P,CanvasGradient:B,CanvasPattern:R,Image:x,ImageData:S,Path2D:_,DOMMatrix:D,DOMRect:k,DOMPoint:L}=window,I={Canvas:class{constructor(t,e){let r=document.createElement("canvas"),n=[];for(var[o,i]of(Object.defineProperty(r,"async",{value:!0,writable:!1,enumerable:!0}),Object.entries({png:()=>v(r,"image/png"),jpg:()=>v(r,"image/jpeg"),pages:()=>n.concat(r).map((t=>t.getContext("2d")))})))Object.defineProperty(r,o,{get:i});return Object.assign(r,{width:t,height:e,newPage(...t){var{width:e,height:o}=r,i=Object.assign(document.createElement("canvas"),{width:e,height:o});i.getContext("2d").drawImage(r,0,0),n.push(i);var[e,o]=t.length?t:[e,o];return Object.assign(r,{width:e,height:o}).getContext("2d")},saveAs(t,e){e="number"==typeof e?{quality:e}:e;let r=E(this.pages,{filename:t,...e}),{pattern:n,padding:o,mime:i,quality:s,matte:a,density:l,archive:h}=r,u=C(r.pages,l);return null==o?b(u[0],i,s,a,t):A(u,i,s,a,h,n,o)},toBuffer(t="png",e={}){e="number"==typeof e?{quality:e}:e;let r=E(this.pages,{extension:t,...e}),{mime:n,quality:o,matte:i,pages:s,density:a}=r,l=C(s,a,i)[0];return v(l,n,o,i)},[T]:r.toDataURL.bind(r),toDataURL(t="png",e={}){e="number"==typeof e?{quality:e}:e;let n=E(this.pages,{extension:t,...e}),{mime:o,quality:i,matte:s,pages:a,density:l}=n,h=C(a,l,s)[0],u=h[h===r?T:"toDataURL"](o,i);return Promise.resolve(u)}})}},loadImage:t=>new Promise(((e,r)=>Object.assign(new x,{crossOrigin:"Anonymous",onload:e,onerror:r,src:t}))),CanvasRenderingContext2D:P,CanvasGradient:B,CanvasPattern:R,Image:x,ImageData:S,Path2D:_,DOMMatrix:D,DOMRect:k,DOMPoint:L},M=(t,e,r={},n=r)=>{if(Array.isArray(e))e.forEach((e=>M(t,e,r,n)));else if("function"==typeof e)e(t,r,n,M);else{const o=Object.keys(e)[0];Array.isArray(e[o])?(n[o]={},M(t,e[o],r,n[o])):n[o]=e[o](t,r,n,M)}return r},O=(t,e)=>(r,n,o,i)=>{e(r,n,o)&&i(r,t,n,o)},U=(t=0)=>e=>e.data[e.pos+t],N=t=>e=>e.data.subarray(e.pos,e.pos+=t),j=t=>e=>e.data.subarray(e.pos,e.pos+t),z=t=>e=>Array.from(N(t)(e)).map((t=>String.fromCharCode(t))).join(""),F=t=>e=>{const r=N(2)(e);return t?(r[1]<<8)+r[0]:(r[0]<<8)+r[1]},Y=(t,e)=>(r,n,o)=>{const i="function"==typeof e?e(r,n,o):e,s=N(t),a=new Array(i);for(var l=0;l<i;l++)a[l]=s(r);return a},$=t=>e=>{const r=(t=>t.data[t.pos++])(e),n=new Array(8);for(var o=0;o<8;o++)n[7-o]=!!(r&1<<o);return Object.keys(t).reduce(((e,r)=>{const o=t[r];return o.length?e[r]=((t,e,r)=>{for(var n=0,o=0;o<r;o++)n+=t[e+o]&&2**(r-o-1);return n})(n,o.index,o.length):e[r]=n[o.index],e}),{})};var q={blocks:t=>{const e=[],r=t.data.length;for(var n=0,o=(t=>t.data[t.pos++])(t);0!==o&&o;o=(t=>t.data[t.pos++])(t)){if(t.pos+o>=r){const o=r-t.pos;e.push(N(o)(t)),n+=o;break}e.push(N(o)(t)),n+=o}const i=new Uint8Array(n);for(var s=0,a=0;a<e.length;a++)i.set(e[a],s),s+=e[a].length;return i}};const G=O({gce:[{codes:N(2)},{byteSize:t=>t.data[t.pos++]},{extras:$({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:F(!0)},{transparentColorIndex:t=>t.data[t.pos++]},{terminator:t=>t.data[t.pos++]}]},(t=>{var e=j(2)(t);return 33===e[0]&&249===e[1]})),H=O({image:[{code:t=>t.data[t.pos++]},{descriptor:[{left:F(!0)},{top:F(!0)},{width:F(!0)},{height:F(!0)},{lct:$({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},O({lct:Y(3,((t,e,r)=>Math.pow(2,r.descriptor.lct.size+1)))},((t,e,r)=>r.descriptor.lct.exists)),{data:[{minCodeSize:t=>t.data[t.pos++]},q]}]},(t=>44===U()(t))),Q=O({text:[{codes:N(2)},{blockSize:t=>t.data[t.pos++]},{preData:(t,e,r)=>N(r.text.blockSize)(t)},q]},(t=>{var e=j(2)(t);return 33===e[0]&&1===e[1]})),Z=O({application:[{codes:N(2)},{blockSize:t=>t.data[t.pos++]},{id:(t,e,r)=>z(r.blockSize)(t)},q]},(t=>{var e=j(2)(t);return 33===e[0]&&255===e[1]})),K=O({comment:[{codes:N(2)},q]},(t=>{var e=j(2)(t);return 33===e[0]&&254===e[1]})),V=[{header:[{signature:z(3)},{version:z(3)}]},{lsd:[{width:F(!0)},{height:F(!0)},{gct:$({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:t=>t.data[t.pos++]},{pixelAspectRatio:t=>t.data[t.pos++]}]},O({gct:Y(3,((t,e)=>Math.pow(2,e.lsd.gct.size+1)))},((t,e)=>e.lsd.gct.exists)),{frames:((t,e)=>(r,n,o,i)=>{const s=[];let a=r.pos;for(;e(r,n,o);){const e={};if(i(r,t,n,e),r.pos===a)break;a=r.pos,s.push(e)}return s})([G,Z,K,H,Q],(t=>{var e=U()(t);return 33===e||44===e}))}],X=V,J=t=>{const e=new Uint8Array(t);return M({data:e,pos:0},X)},W=(t,e,r)=>{if(!t.image)return void console.warn("gif frame does not have associated image.");const{image:n}=t,o=n.descriptor.width*n.descriptor.height;var i=((t,e,r)=>{const n=4096,o=r;var i,s,a,l,h,u,c,f,g,d;const p=new Array(r),m=new Array(n),y=new Array(n),w=new Array(4097);for(h=1+(s=1<<(d=t)),i=s+2,c=-1,a=(1<<(l=d+1))-1,f=0;f<s;f++)m[f]=0,y[f]=f;var v,b,A,C,E,T;for(v=b=A=C=E=T=0,g=0;g<o;){if(0===C){if(b<l){v+=e[T]<<b,b+=8,T++;continue}if(f=v&a,v>>=l,b-=l,f>i||f==h)break;if(f==s){a=(1<<(l=d+1))-1,i=s+2,c=-1;continue}if(-1==c){w[C++]=y[f],c=f,A=f;continue}for(u=f,f==i&&(w[C++]=A,f=c);f>s;)w[C++]=y[f],f=m[f];A=255&y[f],w[C++]=A,i<n&&(m[i]=c,y[i]=A,0==(++i&a)&&i<n&&(l++,a+=i)),c=u}C--,p[E++]=w[C],g++}for(g=E;g<o;g++)p[g]=0;return p})(n.data.minCodeSize,n.data.blocks,o);n.descriptor.lct.interlaced&&(i=((t,e)=>{const r=new Array(t.length),n=t.length/e,o=function(n,o){const i=t.slice(o*e,(o+1)*e);r.splice.apply(r,[n*e,e].concat(i))},i=[0,4,2,1],s=[8,8,4,2];for(var a=0,l=0;l<4;l++)for(var h=i[l];h<n;h+=s[l])o(h,a),a++;return r})(i,n.descriptor.width));const s={pixels:i,dims:{top:t.image.descriptor.top,left:t.image.descriptor.left,width:t.image.descriptor.width,height:t.image.descriptor.height}};return n.descriptor.lct&&n.descriptor.lct.exists?s.colorTable=n.lct:s.colorTable=e,t.gce&&(s.delay=10*(t.gce.delay||10),s.disposalType=t.gce.extras.disposal,t.gce.extras.transparentColorGiven&&(s.transparentIndex=t.gce.transparentColorIndex)),r&&(s.patch=(t=>{const e=t.pixels.length,r=new Uint8ClampedArray(4*e);for(var n=0;n<e;n++){const e=4*n,o=t.pixels[n],i=t.colorTable[o];r[e]=i[0],r[e+1]=i[1],r[e+2]=i[2],r[e+3]=o!==t.transparentIndex?255:0}return r})(s)),s};function tt(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=Number(t)?3:0)}class et{constructor(t){this.mode=ot.MODE_8BIT_BYTE,this.parsedData=[],this.data=t;const e=[];for(let t=0,r=this.data.length;t<r;t++){const r=[],n=this.data.charCodeAt(t);n>65536?(r[0]=240|(1835008&n)>>>18,r[1]=128|(258048&n)>>>12,r[2]=128|(4032&n)>>>6,r[3]=128|63&n):n>2048?(r[0]=224|(61440&n)>>>12,r[1]=128|(4032&n)>>>6,r[2]=128|63&n):n>128?(r[0]=192|(1984&n)>>>6,r[1]=128|63&n):r[0]=n,e.push(r)}this.parsedData=Array.prototype.concat.apply([],e),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(t){for(let e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}}class rt{constructor(t=-1,e=nt.L){this.moduleCount=0,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=e,this.moduleCount=0,this.dataList=[]}addData(t){if(this.typeNumber<=0)this.typeNumber=function(t,e){for(var r=1,n=tt(t),o=0,i=ct.length;o<i;o++){var s=0;switch(e){case nt.L:s=ct[o][0];break;case nt.M:s=ct[o][1];break;case nt.Q:s=ct[o][2];break;case nt.H:s=ct[o][3]}if(n<=s)break;r++}if(r>ct.length)throw new Error("Too long data");return r}(t,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error(`Invalid QR version: ${this.typeNumber}`);if(!function(t,e,r){const n=tt(e),o=t-1;let i=0;switch(r){case nt.L:i=ct[o][0];break;case nt.M:i=ct[o][1];break;case nt.Q:i=ct[o][2];break;case nt.H:i=ct[o][3]}return n<=i}(this.typeNumber,t,this.errorCorrectLevel))throw new Error(`Data is too long for QR version: ${this.typeNumber}`)}const e=new et(t);this.dataList.push(e),this.dataCache=void 0}isDark(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(`${t},${e}`);return this.modules[t][e]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(let t=0;t<this.moduleCount;t++){this.modules[t]=new Array(this.moduleCount);for(let e=0;e<this.moduleCount;e++)this.modules[t][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=rt.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)}setupPositionProbePattern(t,e){for(let r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(let n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(this.modules[t+r][e+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)}getBestMaskPattern(){if(Number.isInteger(this.maskPattern)&&Object.values(it).includes(this.maskPattern))return this.maskPattern;let t=0,e=0;for(let r=0;r<8;r++){this.makeImpl(!0,r);const n=st.getLostPoint(this);(0==r||t>n)&&(t=n,e=r)}return e}setupTimingPattern(){for(let t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(let t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)}setupPositionAdjustPattern(){const t=st.getPatternPosition(this.typeNumber);for(let e=0;e<t.length;e++)for(let r=0;r<t.length;r++){const n=t[e],o=t[r];if(null==this.modules[n][o])for(let t=-2;t<=2;t++)for(let e=-2;e<=2;e++)this.modules[n+t][o+e]=-2==t||2==t||-2==e||2==e||0==t&&0==e}}setupTypeNumber(t){const e=st.getBCHTypeNumber(this.typeNumber);for(var r=0;r<18;r++){var n=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(r=0;r<18;r++){n=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}}setupTypeInfo(t,e){const r=this.errorCorrectLevel<<3|e,n=st.getBCHTypeInfo(r);for(var o=0;o<15;o++){var i=!t&&1==(n>>o&1);o<6?this.modules[o][8]=i:o<8?this.modules[o+1][8]=i:this.modules[this.moduleCount-15+o][8]=i}for(o=0;o<15;o++){i=!t&&1==(n>>o&1);o<8?this.modules[8][this.moduleCount-o-1]=i:o<9?this.modules[8][15-o-1+1]=i:this.modules[8][15-o-1]=i}this.modules[this.moduleCount-8][8]=!t}mapData(t,e){let r=-1,n=this.moduleCount-1,o=7,i=0;for(let s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(let r=0;r<2;r++)if(null==this.modules[n][s-r]){let a=!1;i<t.length&&(a=1==(t[i]>>>o&1));st.getMask(e,n,s-r)&&(a=!a),this.modules[n][s-r]=a,o--,-1==o&&(i++,o=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}}static createData(t,e,r){const n=ht.getRSBlocks(t,e),o=new ut;for(var i=0;i<r.length;i++){const e=r[i];o.put(e.mode,4),o.put(e.getLength(),st.getLengthInBits(e.mode,t)),e.write(o)}let s=0;for(i=0;i<n.length;i++)s+=n[i].dataCount;if(o.getLengthInBits()>8*s)throw new Error(`code length overflow. (${o.getLengthInBits()}>${8*s})`);for(o.getLengthInBits()+4<=8*s&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*s||(o.put(rt.PAD0,8),o.getLengthInBits()>=8*s));)o.put(rt.PAD1,8);return rt.createBytes(o,n)}static createBytes(t,e){let r=0,n=0,o=0;const i=new Array(e.length),s=new Array(e.length);for(var a=0;a<e.length;a++){const h=e[a].dataCount,u=e[a].totalCount-h;n=Math.max(n,h),o=Math.max(o,u),i[a]=new Array(h);for(var l=0;l<i[a].length;l++)i[a][l]=255&t.buffer[l+r];r+=h;const c=st.getErrorCorrectPolynomial(u),f=new lt(i[a],c.getLength()-1).mod(c);s[a]=new Array(c.getLength()-1);for(l=0;l<s[a].length;l++){const t=l+f.getLength()-s[a].length;s[a][l]=t>=0?f.get(t):0}}let h=0;for(l=0;l<e.length;l++)h+=e[l].totalCount;const u=new Array(h);let c=0;for(l=0;l<n;l++)for(a=0;a<e.length;a++)l<i[a].length&&(u[c++]=i[a][l]);for(l=0;l<o;l++)for(a=0;a<e.length;a++)l<s[a].length&&(u[c++]=s[a][l]);return u}}rt.PAD0=236,rt.PAD1=17;const nt={L:1,M:0,Q:3,H:2},ot={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},it={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};class st{static getBCHTypeInfo(t){let e=t<<10;for(;st.getBCHDigit(e)-st.getBCHDigit(st.G15)>=0;)e^=st.G15<<st.getBCHDigit(e)-st.getBCHDigit(st.G15);return(t<<10|e)^st.G15_MASK}static getBCHTypeNumber(t){let e=t<<12;for(;st.getBCHDigit(e)-st.getBCHDigit(st.G18)>=0;)e^=st.G18<<st.getBCHDigit(e)-st.getBCHDigit(st.G18);return t<<12|e}static getBCHDigit(t){let e=0;for(;0!=t;)e++,t>>>=1;return e}static getPatternPosition(t){return st.PATTERN_POSITION_TABLE[t-1]}static getMask(t,e,r){switch(t){case it.PATTERN000:return(e+r)%2==0;case it.PATTERN001:return e%2==0;case it.PATTERN010:return r%3==0;case it.PATTERN011:return(e+r)%3==0;case it.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case it.PATTERN101:return e*r%2+e*r%3==0;case it.PATTERN110:return(e*r%2+e*r%3)%2==0;case it.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error(`bad maskPattern:${t}`)}}static getErrorCorrectPolynomial(t){let e=new lt([1],0);for(let r=0;r<t;r++)e=e.multiply(new lt([1,at.gexp(r)],0));return e}static getLengthInBits(t,e){if(1<=e&&e<10)switch(t){case ot.MODE_NUMBER:return 10;case ot.MODE_ALPHA_NUM:return 9;case ot.MODE_8BIT_BYTE:case ot.MODE_KANJI:return 8;default:throw new Error(`mode:${t}`)}else if(e<27)switch(t){case ot.MODE_NUMBER:return 12;case ot.MODE_ALPHA_NUM:return 11;case ot.MODE_8BIT_BYTE:return 16;case ot.MODE_KANJI:return 10;default:throw new Error(`mode:${t}`)}else{if(!(e<41))throw new Error(`type:${e}`);switch(t){case ot.MODE_NUMBER:return 14;case ot.MODE_ALPHA_NUM:return 13;case ot.MODE_8BIT_BYTE:return 16;case ot.MODE_KANJI:return 12;default:throw new Error(`mode:${t}`)}}}static getLostPoint(t){const e=t.getModuleCount();let r=0;for(var n=0;n<e;n++)for(var o=0;o<e;o++){let i=0;const s=t.isDark(n,o);for(let r=-1;r<=1;r++)if(!(n+r<0||e<=n+r))for(let a=-1;a<=1;a++)o+a<0||e<=o+a||0==r&&0==a||s==t.isDark(n+r,o+a)&&i++;i>5&&(r+=3+i-5)}for(n=0;n<e-1;n++)for(o=0;o<e-1;o++){let e=0;t.isDark(n,o)&&e++,t.isDark(n+1,o)&&e++,t.isDark(n,o+1)&&e++,t.isDark(n+1,o+1)&&e++,0!=e&&4!=e||(r+=3)}for(n=0;n<e;n++)for(o=0;o<e-6;o++)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(r+=40);for(o=0;o<e;o++)for(n=0;n<e-6;n++)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(r+=40);let i=0;for(o=0;o<e;o++)for(n=0;n<e;n++)t.isDark(n,o)&&i++;return r+=10*(Math.abs(100*i/e/e-50)/5),r}}st.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],st.G15=1335,st.G18=7973,st.G15_MASK=21522;class at{static glog(t){if(t<1)throw new Error(`glog(${t})`);return at.LOG_TABLE[t]}static gexp(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return at.EXP_TABLE[t]}}at.EXP_TABLE=new Array(256),at.LOG_TABLE=new Array(256),at._constructor=function(){for(var t=0;t<8;t++)at.EXP_TABLE[t]=1<<t;for(t=8;t<256;t++)at.EXP_TABLE[t]=at.EXP_TABLE[t-4]^at.EXP_TABLE[t-5]^at.EXP_TABLE[t-6]^at.EXP_TABLE[t-8];for(t=0;t<255;t++)at.LOG_TABLE[at.EXP_TABLE[t]]=t}();class lt{constructor(t,e){if(null==t.length)throw new Error(`${t.length}/${e}`);let r=0;for(;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(let e=0;e<t.length-r;e++)this.num[e]=t[e+r]}get(t){return this.num[t]}getLength(){return this.num.length}multiply(t){const e=new Array(this.getLength()+t.getLength()-1);for(let r=0;r<this.getLength();r++)for(let n=0;n<t.getLength();n++)e[r+n]^=at.gexp(at.glog(this.get(r))+at.glog(t.get(n)));return new lt(e,0)}mod(t){if(this.getLength()-t.getLength()<0)return this;const e=at.glog(this.get(0))-at.glog(t.get(0)),r=new Array(this.getLength());for(var n=0;n<this.getLength();n++)r[n]=this.get(n);for(n=0;n<t.getLength();n++)r[n]^=at.gexp(at.glog(t.get(n))+e);return new lt(r,0).mod(t)}}class ht{constructor(t,e){this.totalCount=t,this.dataCount=e}static getRSBlocks(t,e){const r=ht.getRsBlockTable(t,e);if(null==r)throw new Error(`bad rs block @ typeNumber:${t}/errorCorrectLevel:${e}`);const n=r.length/3,o=[];for(let t=0;t<n;t++){const e=r[3*t+0],n=r[3*t+1],i=r[3*t+2];for(let t=0;t<e;t++)o.push(new ht(n,i))}return o}static getRsBlockTable(t,e){switch(e){case nt.L:return ht.RS_BLOCK_TABLE[4*(t-1)+0];case nt.M:return ht.RS_BLOCK_TABLE[4*(t-1)+1];case nt.Q:return ht.RS_BLOCK_TABLE[4*(t-1)+2];case nt.H:return ht.RS_BLOCK_TABLE[4*(t-1)+3];default:return}}}ht.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];class ut{constructor(){this.buffer=[],this.length=0}get(t){const e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)}put(t,e){for(let r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))}getLengthInBits(){return this.length}putBit(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}}const ct=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var ft=256,gt=1024,dt=1<<18;const pt=function(t,e){var r,n,o,i,s;function a(t,e,n,o,i){r[e][0]-=t*(r[e][0]-n)/gt,r[e][1]-=t*(r[e][1]-o)/gt,r[e][2]-=t*(r[e][2]-i)/gt}function l(t,e,n,o,i){for(var a,l,h=Math.abs(e-t),u=Math.min(e+t,ft),c=e+1,f=e-1,g=1;c<u||f>h;)l=s[g++],c<u&&((a=r[c++])[0]-=l*(a[0]-n)/dt,a[1]-=l*(a[1]-o)/dt,a[2]-=l*(a[2]-i)/dt),f>h&&((a=r[f--])[0]-=l*(a[0]-n)/dt,a[1]-=l*(a[1]-o)/dt,a[2]-=l*(a[2]-i)/dt)}function h(t,e,n){var s,a,l,h,u,c=~(1<<31),f=c,g=-1,d=g;for(s=0;s<ft;s++)a=r[s],(l=Math.abs(a[0]-t)+Math.abs(a[1]-e)+Math.abs(a[2]-n))<c&&(c=l,g=s),(h=l-(o[s]>>12))<f&&(f=h,d=s),u=i[s]>>10,i[s]-=u,o[s]+=u<<10;return i[g]+=64,o[g]-=65536,d}this.buildColormap=function(){!function(){var t,e;for(r=[],n=new Int32Array(256),o=new Int32Array(ft),i=new Int32Array(ft),s=new Int32Array(32),t=0;t<ft;t++)e=(t<<12)/ft,r[t]=new Float64Array([e,e,e,0]),i[t]=256,o[t]=0}(),function(){var r,n,o,i,u,c,f=t.length,g=30+(e-1)/3,d=f/(3*e),p=~~(d/100),m=gt,y=2048,w=y>>6;for(w<=1&&(w=0),r=0;r<w;r++)s[r]=m*(256*(w*w-r*r)/(w*w));f<1509?(e=1,n=3):n=f%499!=0?1497:f%491!=0?1473:f%487!=0?1461:1509;var v=0;for(r=0;r<d;)if(a(m,c=h(o=(255&t[v])<<4,i=(255&t[v+1])<<4,u=(255&t[v+2])<<4),o,i,u),0!==w&&l(w,c,o,i,u),(v+=n)>=f&&(v-=f),0===p&&(p=1),++r%p==0)for(m-=m/g,(w=(y-=y/30)>>6)<=1&&(w=0),c=0;c<w;c++)s[c]=m*(256*(w*w-c*c)/(w*w))}(),function(){for(var t=0;t<ft;t++)r[t][0]>>=4,r[t][1]>>=4,r[t][2]>>=4,r[t][3]=t}(),function(){var t,e,o,i,s,a,l=0,h=0;for(t=0;t<ft;t++){for(s=t,a=(o=r[t])[1],e=t+1;e<ft;e++)(i=r[e])[1]<a&&(s=e,a=i[1]);if(i=r[s],t!=s&&(e=i[0],i[0]=o[0],o[0]=e,e=i[1],i[1]=o[1],o[1]=e,e=i[2],i[2]=o[2],o[2]=e,e=i[3],i[3]=o[3],o[3]=e),a!=l){for(n[l]=h+t>>1,e=l+1;e<a;e++)n[e]=t;l=a,h=t}}for(n[l]=h+255>>1,e=l+1;e<256;e++)n[e]=255}()},this.getColormap=function(){for(var t=[],e=[],n=0;n<ft;n++)e[r[n][3]]=n;for(var o=0,i=0;i<ft;i++){var s=e[i];t[o++]=r[s][0],t[o++]=r[s][1],t[o++]=r[s][2]}return t},this.lookupRGB=function(t,e,o){for(var i,s,a,l=1e3,h=-1,u=n[e],c=u-1;u<ft||c>=0;)u<ft&&((a=(s=r[u])[1]-e)>=l?u=ft:(u++,a<0&&(a=-a),(i=s[0]-t)<0&&(i=-i),(a+=i)<l&&((i=s[2]-o)<0&&(i=-i),(a+=i)<l&&(l=a,h=s[3])))),c>=0&&((a=e-(s=r[c])[1])>=l?c=-1:(c--,a<0&&(a=-a),(i=s[0]-t)<0&&(i=-i),(a+=i)<l&&((i=s[2]-o)<0&&(i=-i),(a+=i)<l&&(l=a,h=s[3]))));return h}};var mt=5003,yt=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];const wt=function(t,e,r,n){var o,i,s,a,l,h,u,c,f,g=Math.max(2,n),d=new Uint8Array(256),p=new Int32Array(mt),m=new Int32Array(mt),y=0,w=0,v=!1;function b(t,e){d[i++]=t,i>=254&&E(e)}function A(t){C(mt),w=l+2,v=!0,B(l,t)}function C(t){for(var e=0;e<t;++e)p[e]=-1}function E(t){i>0&&(t.writeByte(i),t.writeBytes(d,0,i),i=0)}function T(t){return(1<<t)-1}function P(){return 0===u?-1:(--u,255&r[c++])}function B(t,e){for(o&=yt[y],y>0?o|=t<<y:o=t,y+=f;y>=8;)b(255&o,e),o>>=8,y-=8;if((w>s||v)&&(v?(s=T(f=a),v=!1):(++f,s=12==f?4096:T(f))),t==h){for(;y>0;)b(255&o,e),o>>=8,y-=8;E(e)}}this.encode=function(r){r.writeByte(g),u=t*e,c=0,function(t,e){var r,n,o,u,c,g,d;for(v=!1,s=T(f=a=t),h=1+(l=1<<t-1),w=l+2,i=0,u=P(),d=0,r=mt;r<65536;r*=2)++d;d=8-d,C(g=mt),B(l,e);t:for(;-1!=(n=P());)if(r=(n<<12)+u,p[o=n<<d^u]!==r){if(p[o]>=0){c=g-o,0===o&&(c=1);do{if((o-=c)<0&&(o+=g),p[o]===r){u=m[o];continue t}}while(p[o]>=0)}B(u,e),u=n,w<4096?(m[o]=w++,p[o]=r):A(e)}else u=m[o];B(u,e),B(h,e)}(g+1,r),r.writeByte(0)}};function vt(){this.page=-1,this.pages=[],this.newPage()}vt.pageSize=4096,vt.charMap={};for(var bt=0;bt<256;bt++)vt.charMap[bt]=String.fromCharCode(bt);function At(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new vt}vt.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(vt.pageSize),this.cursor=0},vt.prototype.getData=function(){for(var t="",e=0;e<this.pages.length;e++)for(var r=0;r<vt.pageSize;r++)t+=vt.charMap[this.pages[e][r]];return t},vt.prototype.toFlattenUint8Array=function(){const t=[];for(var e=0;e<this.pages.length;e++)if(e===this.pages.length-1){const r=Uint8Array.from(this.pages[e].slice(0,this.cursor));t.push(r)}else t.push(this.pages[e]);const r=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));return t.reduce(((t,e)=>(r.set(e,t),t+e.length)),0),r},vt.prototype.writeByte=function(t){this.cursor>=vt.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},vt.prototype.writeUTFBytes=function(t){for(var e=t.length,r=0;r<e;r++)this.writeByte(t.charCodeAt(r))},vt.prototype.writeBytes=function(t,e,r){for(var n=r||t.length,o=e||0;o<n;o++)this.writeByte(t[o])},At.prototype.setDelay=function(t){this.delay=Math.round(t/10)},At.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},At.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},At.prototype.setRepeat=function(t){this.repeat=t},At.prototype.setTransparent=function(t){this.transparent=t},At.prototype.addFrame=function(t){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),!0===this.globalPalette&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},At.prototype.finish=function(){this.out.writeByte(59)},At.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},At.prototype.setDither=function(t){!0===t&&(t="FloydSteinberg"),this.dither=t},At.prototype.setGlobalPalette=function(t){this.globalPalette=t},At.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},At.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},At.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new pt(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/)):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},At.prototype.indexPixels=function(t){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);for(var r=0,n=0;n<e;n++){var o=this.findClosestRGB(255&this.pixels[r++],255&this.pixels[r++],255&this.pixels[r++]);this.usedEntry[o]=!0,this.indexedPixels[n]=o}},At.prototype.ditherPixels=function(t,e){var r={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!t||!r[t])throw"Unknown dithering kernel: "+t;var n=r[t],o=0,i=this.height,s=this.width,a=this.pixels,l=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var h=0;h<i;h++){e&&(l*=-1);for(var u=1==l?0:s-1,c=1==l?s:0;u!==c;u+=l){var f=3*(o=h*s+u),g=a[f],d=a[f+1],p=a[f+2];f=this.findClosestRGB(g,d,p),this.usedEntry[f]=!0,this.indexedPixels[o]=f,f*=3;for(var m=g-this.colorTab[f],y=d-this.colorTab[f+1],w=p-this.colorTab[f+2],v=1==l?0:n.length-1,b=1==l?n.length:0;v!==b;v+=l){var A=n[v][1],C=n[v][2];if(A+u>=0&&A+u<s&&C+h>=0&&C+h<i){var E=n[v][0];f=o+A+C*s,a[f*=3]=Math.max(0,Math.min(255,a[f]+m*E)),a[f+1]=Math.max(0,Math.min(255,a[f+1]+y*E)),a[f+2]=Math.max(0,Math.min(255,a[f+2]+w*E))}}}}},At.prototype.findClosest=function(t,e){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,e)},At.prototype.findClosestRGB=function(t,e,r,n){if(null===this.colorTab)return-1;if(this.neuQuant&&!n)return this.neuQuant.lookupRGB(t,e,r);for(var o=0,i=16777216,s=this.colorTab.length,a=0,l=0;a<s;l++){var h=t-(255&this.colorTab[a++]),u=e-(255&this.colorTab[a++]),c=r-(255&this.colorTab[a++]),f=h*h+u*u+c*c;(!n||this.usedEntry[l])&&f<i&&(i=f,o=l)}return o},At.prototype.getImagePixels=function(){var t=this.width,e=this.height;this.pixels=new Uint8Array(t*e*3);for(var r=this.image,n=0,o=0,i=0;i<e;i++)for(var s=0;s<t;s++)this.pixels[o++]=r[n++],this.pixels[o++]=r[n++],this.pixels[o++]=r[n++],n++},At.prototype.writeGraphicCtrlExt=function(){var t,e;this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4),null===this.transparent?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=7&this.dispose),e<<=2,this.out.writeByte(0|e|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},At.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},At.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},At.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},At.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;e<t;e++)this.out.writeByte(0)},At.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},At.prototype.writePixels=function(){new wt(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this.out)},At.prototype.stream=function(){return this.out};const Ct=At;var Et=r(764).lW,Tt=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{l(n.next(t))}catch(t){i(t)}}function a(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const{Canvas:Pt}=I,Bt=.4;function Rt(t){if(t)return new Promise((function(r,n){if("data"==t.slice(0,4)){let o=new Image;return o.onload=function(){r(o),e(o)},o.onerror=function(){n("Image load error"),e(o)},void(o.src=t)}let o=new Image;o.setAttribute("crossOrigin","Anonymous"),o.onload=function(){r(o)},o.onerror=function(){n("Image load error")},o.src=t}));function e(t){t.onload=null,t.onerror=null}}class xt{constructor(t){const e=Object.assign({},t);if(Object.keys(xt.defaultOptions).forEach((t=>{t in e||Object.defineProperty(e,t,{value:xt.defaultOptions[t],enumerable:!0,writable:!0})})),e.components?"object"==typeof e.components&&Object.keys(xt.defaultComponentOptions).forEach((t=>{t in e.components?Object.defineProperty(e.components,t,{value:Object.assign(Object.assign({},xt.defaultComponentOptions[t]),e.components[t]),enumerable:!0,writable:!0}):Object.defineProperty(e.components,t,{value:xt.defaultComponentOptions[t],enumerable:!0,writable:!0})})):e.components=xt.defaultComponentOptions,null!==e.dotScale&&void 0!==e.dotScale){if(e.dotScale<=0||e.dotScale>1)throw new Error("dotScale should be in range (0, 1].");e.components.data.scale=e.dotScale,e.components.timing.scale=e.dotScale,e.components.alignment.scale=e.dotScale}this.options=e,this.canvas=new Pt(t.size,t.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new rt(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}draw(){return new Promise((t=>this._draw().then(t)))}_clear(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}static _prepareRoundedCornerClip(t,e,r,n,o,i){t.beginPath(),t.moveTo(e,r),t.arcTo(e+n,r,e+n,r+o,i),t.arcTo(e+n,r+o,e,r+o,i),t.arcTo(e,r+o,e,r,i),t.arcTo(e,r,e+n,r,i),t.closePath()}static _getAverageRGB(t){const e={r:0,g:0,b:0};let r,n,o=-4;const i={r:0,g:0,b:0};let s=0;n=t.naturalHeight||t.height,r=t.naturalWidth||t.width;const a=new Pt(r,n).getContext("2d");if(!a)return e;let l;a.drawImage(t,0,0);try{l=a.getImageData(0,0,r,n)}catch(t){return e}for(;(o+=20)<l.data.length;)l.data[o]>200||l.data[o+1]>200||l.data[o+2]>200||(++s,i.r+=l.data[o],i.g+=l.data[o+1],i.b+=l.data[o+2]);return i.r=~~(i.r/s),i.g=~~(i.g/s),i.b=~~(i.b/s),i}static _drawDot(t,e,r,n,o=0,i=1){t.fillRect((e+o)*n,(r+o)*n,i*n,i*n)}static _drawAlignProtector(t,e,r,n){t.clearRect((e-2)*n,(r-2)*n,5*n,5*n),t.fillRect((e-2)*n,(r-2)*n,5*n,5*n)}static _drawAlign(t,e,r,n,o=0,i=1,s,a){const l=t.fillStyle;t.fillStyle=s,new Array(4).fill(0).map(((s,a)=>{xt._drawDot(t,e-2+a,r-2,n,o,i),xt._drawDot(t,e+2,r-2+a,n,o,i),xt._drawDot(t,e+2-a,r+2,n,o,i),xt._drawDot(t,e-2,r+2-a,n,o,i)})),xt._drawDot(t,e,r,n,o,i),a||(t.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map(((s,a)=>{xt._drawDot(t,e-1+a,r-1,n,o,i),xt._drawDot(t,e+1,r-1+a,n,o,i),xt._drawDot(t,e+1-a,r+1,n,o,i),xt._drawDot(t,e-1,r+1-a,n,o,i)}))),t.fillStyle=l}_draw(){var t,e,r,n,o,i,s,a,l,h,u,c,f,g,d,p,m,y,w;return Tt(this,void 0,void 0,(function*(){const v=null===(t=this.qrCode)||void 0===t?void 0:t.moduleCount,b=this.options.size;let A=this.options.margin;(A<0||2*A>=b)&&(A=0);const C=Math.ceil(A),E=b-2*A,T=this.options.whiteMargin,P=this.options.backgroundDimming,B=Math.ceil(E/v),R=B*v,x=R+2*C,S=new Pt(x,x),_=S.getContext("2d");this._clear(),_.save(),_.translate(C,C);const D=new Pt(x,x),k=D.getContext("2d");let L=null,I=[];if(this.options.gifBackground){const t=J(this.options.gifBackground);if(L=t,O=!0,I=(M=t).frames.filter((t=>t.image)).map((t=>W(t,M.gct,O))),this.options.autoColor){let t=0,e=0,r=0,n=0;for(let o=0;o<I[0].colorTable.length;o++){const i=I[0].colorTable[o];i[0]>200||i[1]>200||i[2]>200||(0===i[0]&&0===i[1]&&0===i[2]||(n++,t+=i[0],e+=i[1],r+=i[2]))}t=~~(t/n),e=~~(e/n),r=~~(r/n),this.options.colorDark=`rgb(${t},${e},${r})`}}else if(this.options.backgroundImage){const t=yield Rt(this.options.backgroundImage);if(this.options.autoColor){const e=xt._getAverageRGB(t);this.options.colorDark=`rgb(${e.r},${e.g},${e.b})`}k.drawImage(t,0,0,t.width,t.height,0,0,x,x),k.rect(0,0,x,x),k.fillStyle=P,k.fill()}else k.rect(0,0,x,x),k.fillStyle=this.options.colorLight,k.fill();var M,O;const U=st.getPatternPosition(this.qrCode.typeNumber),N=(null===(r=null===(e=this.options.components)||void 0===e?void 0:e.data)||void 0===r?void 0:r.scale)||Bt,j=.5*(1-N);for(let t=0;t<v;t++)for(let e=0;e<v;e++){const r=this.qrCode.isDark(t,e),n=e<8&&(t<8||t>=v-8)||e>=v-8&&t<8,o=6==t&&e>=8&&e<=v-8||6==e&&t>=8&&t<=v-8;let i=n||o;for(let r=1;r<U.length-1;r++)i=i||t>=U[r]-2&&t<=U[r]+2&&e>=U[r]-2&&e<=U[r]+2;const s=e*B+(i?0:j*B),a=t*B+(i?0:j*B);if(_.strokeStyle=r?this.options.colorDark:this.options.colorLight,_.lineWidth=.5,_.fillStyle=r?this.options.colorDark:this.options.colorLight,0===U.length)i||_.fillRect(s,a,(i?1:N)*B,(i?1:N)*B);else{const r=e<v-4&&e>=v-4-5&&t<v-4&&t>=v-4-5;i||r||_.fillRect(s,a,(i?1:N)*B,(i?1:N)*B)}}const z=U[U.length-1],F=this.options.colorLight;if(_.fillStyle=F,_.fillRect(0,0,8*B,8*B),_.fillRect(0,(v-8)*B,8*B,8*B),_.fillRect((v-8)*B,0,8*B,8*B),(null===(o=null===(n=this.options.components)||void 0===n?void 0:n.timing)||void 0===o?void 0:o.protectors)&&(_.fillRect(8*B,6*B,(v-8-8)*B,B),_.fillRect(6*B,8*B,B,(v-8-8)*B)),(null===(s=null===(i=this.options.components)||void 0===i?void 0:i.cornerAlignment)||void 0===s?void 0:s.protectors)&&xt._drawAlignProtector(_,z,z,B),null===(l=null===(a=this.options.components)||void 0===a?void 0:a.alignment)||void 0===l?void 0:l.protectors)for(let t=0;t<U.length;t++)for(let e=0;e<U.length;e++){const r=U[e],n=U[t];(6!==r||6!==n&&n!==z)&&((6!==n||6!==r&&r!==z)&&(r===z&&n===z||xt._drawAlignProtector(_,r,n,B)))}_.fillStyle=this.options.colorDark,_.fillRect(0,0,7*B,B),_.fillRect((v-7)*B,0,7*B,B),_.fillRect(0,6*B,7*B,B),_.fillRect((v-7)*B,6*B,7*B,B),_.fillRect(0,(v-7)*B,7*B,B),_.fillRect(0,(v-7+6)*B,7*B,B),_.fillRect(0,0,B,7*B),_.fillRect(6*B,0,B,7*B),_.fillRect((v-7)*B,0,B,7*B),_.fillRect((v-7+6)*B,0,B,7*B),_.fillRect(0,(v-7)*B,B,7*B),_.fillRect(6*B,(v-7)*B,B,7*B),_.fillRect(2*B,2*B,3*B,3*B),_.fillRect((v-7+2)*B,2*B,3*B,3*B),_.fillRect(2*B,(v-7+2)*B,3*B,3*B);const Y=(null===(u=null===(h=this.options.components)||void 0===h?void 0:h.timing)||void 0===u?void 0:u.scale)||Bt,$=.5*(1-Y);for(let t=0;t<v-8;t+=2)xt._drawDot(_,8+t,6,B,$,Y),xt._drawDot(_,6,8+t,B,$,Y);const q=(null===(f=null===(c=this.options.components)||void 0===c?void 0:c.cornerAlignment)||void 0===f?void 0:f.scale)||Bt,G=.5*(1-q);xt._drawAlign(_,z,z,B,G,q,this.options.colorDark,(null===(d=null===(g=this.options.components)||void 0===g?void 0:g.cornerAlignment)||void 0===d?void 0:d.protectors)||!1);const H=(null===(m=null===(p=this.options.components)||void 0===p?void 0:p.alignment)||void 0===m?void 0:m.scale)||Bt,Q=.5*(1-H);for(let t=0;t<U.length;t++)for(let e=0;e<U.length;e++){const r=U[e],n=U[t];(6!==r||6!==n&&n!==z)&&((6!==n||6!==r&&r!==z)&&(r===z&&n===z||xt._drawAlign(_,r,n,B,Q,H,this.options.colorDark,(null===(w=null===(y=this.options.components)||void 0===y?void 0:y.alignment)||void 0===w?void 0:w.protectors)||!1)))}if(T&&(_.fillStyle=this.options.backgroundColor,_.fillRect(-C,-C,x,C),_.fillRect(-C,R,x,C),_.fillRect(R,-C,C,x),_.fillRect(-C,-C,C,x)),this.options.logoImage){const t=yield Rt(this.options.logoImage);let e=this.options.logoScale,r=this.options.logoMargin,n=this.options.logoCornerRadius;(e<=0||e>=1)&&(e=.2),r<0&&(r=0),n<0&&(n=0);const o=R*e,i=.5*(x-o),s=i;_.restore(),_.fillStyle=this.options.logoBackgroundColor,_.save(),xt._prepareRoundedCornerClip(_,i-r,s-r,o+2*r,o+2*r,n+r),_.clip();const a=_.globalCompositeOperation;_.globalCompositeOperation="destination-out",_.fill(),_.globalCompositeOperation=a,_.restore(),_.save(),xt._prepareRoundedCornerClip(_,i,s,o,o,n),_.clip(),_.drawImage(t,i,s,o,o),_.restore(),_.save(),_.translate(C,C)}if(L){let t,e,r,n,o,i;if(I.forEach((function(s){t||(t=new Ct(b,b),t.setDelay(s.delay),t.setRepeat(0));const{width:a,height:l}=s.dims;e||(e=new Pt(a,l),r=e.getContext("2d"),r.rect(0,0,e.width,e.height),r.fillStyle="#ffffff",r.fill()),n&&i&&a===n.width&&l===n.height||(n=new Pt(a,l),o=n.getContext("2d"),i=o.createImageData(a,l)),i.data.set(s.patch),o.putImageData(i,0,0),r.drawImage(n.getContext("2d").canvas,s.dims.left,s.dims.top);const h=new Pt(x,x),u=h.getContext("2d");u.drawImage(e.getContext("2d").canvas,0,0,x,x),u.rect(0,0,x,x),u.fillStyle=P,u.fill(),u.drawImage(S.getContext("2d").canvas,0,0,x,x);const c=new Pt(b,b),f=c.getContext("2d");f.drawImage(h.getContext("2d").canvas,0,0,b,b),t.addFrame(f.getImageData(0,0,c.width,c.height).data)})),!t)throw new Error("No frames.");if(t.finish(),St(this.canvas)){const e=t.stream().toFlattenUint8Array().reduce(((t,e)=>t+String.fromCharCode(e)),"");return Promise.resolve(`data:image/gif;base64,${window.btoa(e)}`)}return Promise.resolve(Et.from(t.stream().toFlattenUint8Array()))}{k.drawImage(S.getContext("2d").canvas,0,0,x,x),_.drawImage(D.getContext("2d").canvas,-C,-C,x,x);const t=new Pt(b,b);t.getContext("2d").drawImage(S.getContext("2d").canvas,0,0,b,b),this.canvas=t;const e=this.options.gifBackground?"gif":"png";return St(this.canvas)?Promise.resolve(this.canvas.toDataURL(e)):Promise.resolve(this.canvas.toBuffer(e))}}))}}function St(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}}xt.CorrectLevel=nt,xt.defaultComponentOptions={data:{scale:.4},timing:{scale:.5,protectors:!1},alignment:{scale:.5,protectors:!1},cornerAlignment:{scale:.5,protectors:!0}},xt.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"rgba(255, 255, 255, 0.6)",correctLevel:nt.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:xt.defaultComponentOptions,autoColor:!0,logoBackgroundColor:"#ffffff",backgroundColor:"#ffffff"};const _t={props:{text:{type:String,required:!0},qid:{type:String},correctLevel:{type:Number,default:1},size:{type:Number,default:200},margin:{type:Number,default:20},colorDark:{type:String,default:"#000000"},colorLight:{type:String,default:"#FFFFFF"},bgSrc:{type:String,default:void 0},background:{type:String,default:"rgba(0,0,0,0)"},backgroundDimming:{type:String,default:"rgba(0,0,0,0)"},logoSrc:{type:String,default:void 0},logoBackgroundColor:{type:String,default:"rgba(255,255,255,1)"},gifBgSrc:{type:String,default:void 0},logoScale:{type:Number,default:.2},logoMargin:{type:Number,default:0},logoCornerRadius:{type:Number,default:8},whiteMargin:{type:[Boolean,String],default:!0},dotScale:{type:Number,default:1},autoColor:{type:[Boolean,String],default:!0},binarize:{type:[Boolean,String],default:!1},binarizeThreshold:{type:Number,default:128},callback:{type:Function,default:function(){}},bindElement:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#FFFFFF"},components:{default:function(){return{data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}}}}},name:"vue-qr",data:()=>({imgUrl:""}),watch:{$props:{deep:!0,handler(){this.main()}}},mounted(){this.main()},methods:{async main(){if(this.gifBgSrc){const t=await o(this.gifBgSrc),e=this.logoSrc;return void this.render(void 0,e,t)}const t=this.bgSrc,e=this.logoSrc;this.render(t,e)},async render(t,e,r){const o=this;new xt({gifBackground:r,text:o.text,size:o.size,margin:o.margin,colorDark:o.colorDark,colorLight:o.colorLight,backgroundColor:o.backgroundColor,backgroundImage:t,backgroundDimming:o.backgroundDimming,logoImage:e,logoScale:o.logoScale,logoBackgroundColor:o.logoBackgroundColor,correctLevel:o.correctLevel,logoMargin:o.logoMargin,logoCornerRadius:o.logoCornerRadius,whiteMargin:n(o.whiteMargin),dotScale:o.dotScale,autoColor:n(o.autoColor),binarize:n(o.binarize),binarizeThreshold:o.binarizeThreshold,components:o.components}).draw().then((t=>{this.imgUrl=t,o.callback&&o.callback(t,o.qid)}))}}};var Dt=r(744);const kt=(0,Dt.Z)(_t,[["render",function(r,n,o,i,s,a){return o.bindElement?((0,t.openBlock)(),(0,t.createElementBlock)("img",{key:0,style:{display:"inline-block"},src:s.imgUrl},null,8,e)):(0,t.createCommentVNode)("",!0)}]]),Lt={props:["resourceName","field"],components:{VueQr:kt}};var It=r(379),Mt=r.n(It),Ot=r(906),Ut={insert:"head",singleton:!1};Mt()(Ot.Z,Ut);Ot.Z.locals;const Nt=(0,Dt.Z)(Lt,[["render",function(e,r,n,o,i,s){var a=(0,t.resolveComponent)("vue-qr");return(0,t.openBlock)(),(0,t.createElementBlock)("span",null,[(0,t.createVNode)(a,{class:"qr-item",text:this.field.value,size:this.field.indexSize,bgSrc:this.field.background,logoSrc:this.field.logo,margin:0},null,8,["text","size","bgSrc","logoSrc"])])}]]);var jt={slot:"value"};const zt={props:["field"],components:{VueQr:kt}};var Ft=r(178),Yt={insert:"head",singleton:!1};Mt()(Ft.Z,Yt);Ft.Z.locals;const $t=(0,Dt.Z)(zt,[["render",function(e,r,n,o,i,s){var a=(0,t.resolveComponent)("vue-qr"),l=(0,t.resolveComponent)("panel-item");return(0,t.openBlock)(),(0,t.createBlock)(l,{field:n.field},{default:(0,t.withCtx)((function(){return[(0,t.createElementVNode)("p",jt,[(0,t.createVNode)(a,{class:"qr-item",text:n.field.value,size:n.field.detailSize,bgSrc:n.field.background,logoSrc:n.field.logo,margin:0},null,8,["text","size","bgSrc","logoSrc"])])]})),_:1},8,["field"])}]]);Nova.booting((function(t,e){t.component("index-qrcode",Nt),t.component("detail-qrcode",$t)}))})()})();